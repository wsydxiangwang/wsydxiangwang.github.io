(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{414:function(t,a,s){"use strict";s.r(a);var n=s(33),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"虚拟dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom"}},[t._v("#")]),t._v(" 虚拟DOM")]),t._v(" "),s("p",[t._v("要知道渲染"),s("code",[t._v("真实DOM")]),t._v("的开销是很大的，比如有时候我们修改了某个数据，"),s("strong",[t._v("如果直接渲染到真实dom上会引起整个dom树的重绘和重排")]),t._v("，有没有可能我们只更新我们修改的那一小块dom而不要更新整个dom呢？"),s("code",[t._v("diff算法")]),t._v("能够帮助我们。")]),t._v(" "),s("p",[t._v("我们先根据真实DOM生成一颗"),s("code",[t._v("virtual DOM")]),t._v("，当"),s("code",[t._v("virtual DOM")]),t._v("某个节点的数据改变后会生成一个新的"),s("code",[t._v("Vnode")]),t._v("，然后"),s("code",[t._v("Vnode")]),t._v("和"),s("code",[t._v("oldVnode")]),t._v("作对比，发现有不一样的地方就直接修改在真实的DOM上，然后使"),s("code",[t._v("oldVnode")]),t._v("的值为"),s("code",[t._v("Vnode")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("diff")]),t._v("的过程就是调用名为"),s("code",[t._v("patch")]),t._v("的函数，比较新旧节点，一边比较一边给"),s("strong",[t._v("真实的DOM")]),t._v("打补丁。")]),t._v(" "),s("h2",{attrs:{id:"virtual-dom和真实dom的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtual-dom和真实dom的区别"}},[t._v("#")]),t._v(" virtual DOM和真实DOM的区别")]),t._v(" "),s("p",[s("code",[t._v("virtual DOM")]),t._v("是将真实的DOM的数据抽取出来，以对象的形式模拟树形结构。比如dom是这样的：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("123"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("对应的virtual DOM（伪代码）：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Vnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("（温馨提示："),s("code",[t._v("VNode")]),t._v("和"),s("code",[t._v("oldVNode")]),t._v("都是对象，一定要记住）")]),t._v(" "),s("ul",[s("li",[t._v("用JavaScript对象模拟DOM")]),t._v(" "),s("li",[t._v("把此虚拟DOM转成真实DOM并插入页面中")]),t._v(" "),s("li",[t._v("如果有事件发生修改了虚拟DOM")]),t._v(" "),s("li",[t._v("比较两棵虚拟DOM树的差异，得到差异对象")]),t._v(" "),s("li",[t._v("把差异对象应用到真正的DOM树上")])])])}),[],!1,null,null,null);a.default=e.exports}}]);